import{d as N,R as Q,T as $,u as o,h as v,J as E,N as B,e as c,c as C,L as F,t as k,o as R,V as y,f as a,y as s,w as r,A as p,l as j,i as b,z as d,F as q,j as z,B as P,x as L,b as G}from"./index-Bxg717nH.js";import{u as K,a as W}from"./products-ZxIj3jYg.js";import{b as X,_ as H,c as J,d as Y,e as Z,f as ee}from"./SelectValue.vue_vue_type_script_setup_true_lang-C78c8NP6.js";import{c as te,a as oe,_ as I}from"./createLucideIcon-DJvDazA0.js";import{_ as m}from"./check-DbSGt3DS.js";import{_ as n}from"./Label.vue_vue_type_script_setup_true_lang-CrkCd-Zd.js";import{a as ae}from"./index-CCMtHMHu.js";import{A as le}from"./arrow-left-Dl7fGiTg.js";import"./Presence-BOlNR8lw.js";import"./index-DW9eo4Kt.js";import"./Teleport-a9eyij2V.js";import"./PopperContent-Cqmr-cqf.js";import"./useDirection-C6zQSC3y.js";const se=te("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),ie=N({__name:"Textarea",props:{class:{},defaultValue:{},modelValue:{}},emits:["update:modelValue"],setup(S,{emit:h}){const V=S,x=ae(V,"modelValue",h,{passive:!0,defaultValue:V.defaultValue});return(U,f)=>Q((c(),v("textarea",{"onUpdate:modelValue":f[0]||(f[0]=g=>B(x)?x.value=g:null),"data-slot":"textarea",class:E(o(oe)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",V.class))},null,2)),[[$,o(x)]])}}),re={class:"min-h-screen bg-background"},de={class:"max-w-6xl mx-auto px-8 py-8"},ue={class:"mb-8"},ne={class:"text-2xl font-bold text-foreground"},me={class:"text-sm text-muted-foreground mt-1"},pe={class:"bg-card rounded-lg border border-border p-6 space-y-4"},ce={class:"space-y-2"},ve={key:0,class:"text-sm text-destructive"},fe={class:"space-y-2"},ge={key:0,class:"text-sm text-destructive"},ye={class:"grid grid-cols-2 gap-4"},be={class:"space-y-2"},he={class:"space-y-2"},Ve={class:"space-y-2"},xe={class:"grid grid-cols-2 gap-4"},_e={class:"space-y-2"},ke={class:"relative"},Pe={key:0,class:"text-sm text-destructive"},we={class:"space-y-2"},Ie={key:0,class:"text-sm text-destructive"},Se={class:"grid grid-cols-2 gap-4"},Ue={class:"space-y-2"},Me={key:0,class:"text-sm text-destructive"},Ce={class:"space-y-2"},Ne={class:"space-y-2"},Oe={key:0,class:"text-sm text-destructive"},De={class:"space-y-2"},Te={class:"space-y-2"},Ae={class:"grid grid-cols-3 gap-4"},Qe={class:"space-y-2"},$e={class:"space-y-2"},Ee={class:"space-y-2"},Be={class:"space-y-2"},Fe={class:"space-y-2"},Re={class:"space-y-2"},je={class:"border-2 border-dashed border-border rounded-lg p-8 text-center"},qe={for:"file-upload",class:"cursor-pointer flex flex-col items-center justify-center"},ze={key:0,class:"text-sm text-foreground mt-4"},Le={class:"flex justify-end gap-3"},st=N({__name:"new",setup(S){const h=L(),V=F(),_=K(),{categories:x}=X(),{formatCategoryName:U}=W(),f=C(()=>{const i=V.params.id;return i?Number(i):null}),g=C(()=>!!f.value),O=k(null),t=k({title:"",description:"",category:"",price:0,stock:0,discountPercentage:0,brand:"",sku:"",weight:0,width:0,height:0,depth:0,warrantyInformation:"",shippingInformation:"",availabilityStatus:"In Stock",returnPolicy:"",minimumOrderQuantity:1,tags:""}),u=k({}),w=k([]);R(async()=>{if(g.value&&f.value){const i=await _.fetchSingleProduct(f.value);i&&(O.value=i,t.value={title:i.title,description:i.description,category:i.category,price:i.price,stock:i.stock,discountPercentage:i.discountPercentage||0,brand:i.brand||"",sku:i.sku||"",weight:i.weight||0,width:i.dimensions?.width||0,height:i.dimensions?.height||0,depth:i.dimensions?.depth||0,warrantyInformation:i.warrantyInformation||"",shippingInformation:i.shippingInformation||"",availabilityStatus:i.availabilityStatus||"In Stock",returnPolicy:i.returnPolicy||"",minimumOrderQuantity:i.minimumOrderQuantity||y.MIN_ORDER_QUANTITY,tags:i.tags?.join(", ")||""})}});const D=()=>(u.value={},t.value.title.trim()||(u.value.title="Product title is required"),t.value.description.trim()||(u.value.description="Description is required"),t.value.category||(u.value.category="Category is required"),t.value.price<y.MIN_PRICE&&(u.value.price="Price must be positive"),t.value.stock<y.MIN_STOCK&&(u.value.stock="Stock must be positive"),(t.value.discountPercentage<y.MIN_DISCOUNT||t.value.discountPercentage>y.MAX_DISCOUNT)&&(u.value.discountPercentage=`Discount must be between ${y.MIN_DISCOUNT} and ${y.MAX_DISCOUNT}`),Object.keys(u.value).length===0),T=i=>{const e=i.target;e.files&&(w.value=Array.from(e.files))},M=()=>{h.push("/products")},A=async()=>{if(!D()){P.error("Please fix the form errors");return}const i={title:t.value.title,description:t.value.description,category:t.value.category,price:t.value.price,stock:t.value.stock,discountPercentage:t.value.discountPercentage,brand:t.value.brand||void 0,sku:t.value.sku||void 0,weight:t.value.weight||0,dimensions:{width:t.value.width||0,height:t.value.height||0,depth:t.value.depth||0},warrantyInformation:t.value.warrantyInformation||void 0,shippingInformation:t.value.shippingInformation||void 0,availabilityStatus:t.value.availabilityStatus,returnPolicy:t.value.returnPolicy||void 0,minimumOrderQuantity:t.value.minimumOrderQuantity||1,tags:t.value.tags?t.value.tags.split(",").map(e=>e.trim()).filter(Boolean):[]};if(g.value&&f.value)await _.updateProduct(f.value,i)?(P.success("Product updated successfully"),h.push("/products")):P.error("Failed to update product");else{const e=_.addProduct(i);P.promise(e,{loading:"Adding product...",success:l=>l?(h.push("/products"),"Product added successfully"):"Product added",error:"Failed to add product"})}};return(i,e)=>(c(),v("div",re,[a(o(I),{variant:"ghost",size:"icon",onClick:M,class:"fixed top-6 left-40 z-50 rounded-full bg-card shadow-lg hover:bg-muted border border-border"},{default:r(()=>[a(o(le),{class:"w-5 h-5"})]),_:1}),s("div",de,[s("div",ue,[s("h1",ne,p(g.value?"Edit Product":"Add New Product"),1),s("p",me,p(g.value?"Update the product details below.":"Enter the details below to add a new item to your inventory."),1)]),s("form",{onSubmit:j(A,["prevent"]),class:"space-y-8"},[s("div",pe,[e[40]||(e[40]=s("h3",{class:"text-lg font-semibold"},"Product Information",-1)),s("div",ce,[a(o(n),{for:"title"},{default:r(()=>[...e[18]||(e[18]=[d("Product Title",-1)])]),_:1}),a(o(m),{id:"title",modelValue:t.value.title,"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.title=l),placeholder:"Enter product title"},null,8,["modelValue"]),u.value.title?(c(),v("p",ve,p(u.value.title),1)):b("",!0)]),s("div",fe,[a(o(n),{for:"description"},{default:r(()=>[...e[19]||(e[19]=[d("Product Description",-1)])]),_:1}),a(o(ie),{id:"description",modelValue:t.value.description,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.description=l),placeholder:"Provide a detailed description of the product",rows:"4"},null,8,["modelValue"]),u.value.description?(c(),v("p",ge,p(u.value.description),1)):b("",!0)]),s("div",ye,[s("div",be,[a(o(n),{for:"brand"},{default:r(()=>[...e[20]||(e[20]=[d("Brand",-1)])]),_:1}),a(o(m),{id:"brand",modelValue:t.value.brand,"onUpdate:modelValue":e[2]||(e[2]=l=>t.value.brand=l),placeholder:"Enter brand name"},null,8,["modelValue"])]),s("div",he,[a(o(n),{for:"sku"},{default:r(()=>[...e[21]||(e[21]=[d("SKU",-1)])]),_:1}),a(o(m),{id:"sku",modelValue:t.value.sku,"onUpdate:modelValue":e[3]||(e[3]=l=>t.value.sku=l),placeholder:"Enter SKU"},null,8,["modelValue"])])]),s("div",Ve,[a(o(n),{for:"tags"},{default:r(()=>[...e[22]||(e[22]=[d("Tags",-1)])]),_:1}),a(o(m),{id:"tags",modelValue:t.value.tags,"onUpdate:modelValue":e[4]||(e[4]=l=>t.value.tags=l),placeholder:"Enter tags separated by commas"},null,8,["modelValue"])]),e[41]||(e[41]=s("h3",{class:"text-lg font-semibold"},"Pricing & Inventory",-1)),s("div",xe,[s("div",_e,[a(o(n),{for:"price"},{default:r(()=>[...e[23]||(e[23]=[d("Price",-1)])]),_:1}),s("div",ke,[e[24]||(e[24]=s("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}," $ ",-1)),a(o(m),{id:"price",modelValue:t.value.price,"onUpdate:modelValue":e[5]||(e[5]=l=>t.value.price=l),modelModifiers:{number:!0},type:"number",step:"0.01",placeholder:"0.00",class:"pl-7"},null,8,["modelValue"])]),u.value.price?(c(),v("p",Pe,p(u.value.price),1)):b("",!0)]),s("div",we,[a(o(n),{for:"stock"},{default:r(()=>[...e[25]||(e[25]=[d("Stock Quantity",-1)])]),_:1}),a(o(m),{id:"stock",modelValue:t.value.stock,"onUpdate:modelValue":e[6]||(e[6]=l=>t.value.stock=l),modelModifiers:{number:!0},type:"number",placeholder:"Enter stock quantity"},null,8,["modelValue"]),u.value.stock?(c(),v("p",Ie,p(u.value.stock),1)):b("",!0)])]),s("div",Se,[s("div",Ue,[a(o(n),{for:"discountPercentage"},{default:r(()=>[...e[26]||(e[26]=[d("Discount Percentage",-1)])]),_:1}),a(o(m),{id:"discountPercentage",modelValue:t.value.discountPercentage,"onUpdate:modelValue":e[7]||(e[7]=l=>t.value.discountPercentage=l),modelModifiers:{number:!0},type:"number",step:"0.01",placeholder:"0"},null,8,["modelValue"]),u.value.discountPercentage?(c(),v("p",Me,p(u.value.discountPercentage),1)):b("",!0)]),s("div",Ce,[a(o(n),{for:"minimumOrderQuantity"},{default:r(()=>[...e[27]||(e[27]=[d("Minimum Order Quantity",-1)])]),_:1}),a(o(m),{id:"minimumOrderQuantity",modelValue:t.value.minimumOrderQuantity,"onUpdate:modelValue":e[8]||(e[8]=l=>t.value.minimumOrderQuantity=l),modelModifiers:{number:!0},type:"number",placeholder:"1"},null,8,["modelValue"])])]),s("div",Ne,[a(o(n),{for:"category"},{default:r(()=>[...e[28]||(e[28]=[d("Category",-1)])]),_:1}),a(o(H),{modelValue:t.value.category,"onUpdate:modelValue":e[9]||(e[9]=l=>t.value.category=l)},{default:r(()=>[a(o(J),null,{default:r(()=>[a(o(Y),{placeholder:"Select a category"})]),_:1}),a(o(Z),{class:"bg-popover"},{default:r(()=>[(c(!0),v(q,null,z(o(x),l=>(c(),G(o(ee),{key:l,value:l},{default:r(()=>[d(p(o(U)(l)),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),u.value.category?(c(),v("p",Oe,p(u.value.category),1)):b("",!0)]),s("div",De,[a(o(n),{for:"availabilityStatus"},{default:r(()=>[...e[29]||(e[29]=[d("Availability Status",-1)])]),_:1}),a(o(m),{id:"availabilityStatus",modelValue:t.value.availabilityStatus,"onUpdate:modelValue":e[10]||(e[10]=l=>t.value.availabilityStatus=l),placeholder:"In Stock"},null,8,["modelValue"])]),e[42]||(e[42]=s("h3",{class:"text-lg font-semibold"},"Product Details",-1)),s("div",Te,[a(o(n),{for:"weight"},{default:r(()=>[...e[30]||(e[30]=[d("Weight (kg)",-1)])]),_:1}),a(o(m),{id:"weight",modelValue:t.value.weight,"onUpdate:modelValue":e[11]||(e[11]=l=>t.value.weight=l),modelModifiers:{number:!0},type:"number",step:"0.01",placeholder:"0"},null,8,["modelValue"])]),s("div",Ae,[s("div",Qe,[a(o(n),{for:"width"},{default:r(()=>[...e[31]||(e[31]=[d("Width (cm)",-1)])]),_:1}),a(o(m),{id:"width",modelValue:t.value.width,"onUpdate:modelValue":e[12]||(e[12]=l=>t.value.width=l),modelModifiers:{number:!0},type:"number",step:"0.01",placeholder:"0"},null,8,["modelValue"])]),s("div",$e,[a(o(n),{for:"height"},{default:r(()=>[...e[32]||(e[32]=[d("Height (cm)",-1)])]),_:1}),a(o(m),{id:"height",modelValue:t.value.height,"onUpdate:modelValue":e[13]||(e[13]=l=>t.value.height=l),modelModifiers:{number:!0},type:"number",step:"0.01",placeholder:"0"},null,8,["modelValue"])]),s("div",Ee,[a(o(n),{for:"depth"},{default:r(()=>[...e[33]||(e[33]=[d("Depth (cm)",-1)])]),_:1}),a(o(m),{id:"depth",modelValue:t.value.depth,"onUpdate:modelValue":e[14]||(e[14]=l=>t.value.depth=l),modelModifiers:{number:!0},type:"number",step:"0.01",placeholder:"0"},null,8,["modelValue"])])]),s("div",Be,[a(o(n),{for:"warrantyInformation"},{default:r(()=>[...e[34]||(e[34]=[d("Warranty Information",-1)])]),_:1}),a(o(m),{id:"warrantyInformation",modelValue:t.value.warrantyInformation,"onUpdate:modelValue":e[15]||(e[15]=l=>t.value.warrantyInformation=l),placeholder:"e.g., 1 month warranty"},null,8,["modelValue"])]),s("div",Fe,[a(o(n),{for:"shippingInformation"},{default:r(()=>[...e[35]||(e[35]=[d("Shipping Information",-1)])]),_:1}),a(o(m),{id:"shippingInformation",modelValue:t.value.shippingInformation,"onUpdate:modelValue":e[16]||(e[16]=l=>t.value.shippingInformation=l),placeholder:"e.g., Ships in 1 month"},null,8,["modelValue"])]),s("div",Re,[a(o(n),{for:"returnPolicy"},{default:r(()=>[...e[36]||(e[36]=[d("Return Policy",-1)])]),_:1}),a(o(m),{id:"returnPolicy",modelValue:t.value.returnPolicy,"onUpdate:modelValue":e[17]||(e[17]=l=>t.value.returnPolicy=l),placeholder:"e.g., 30 days return policy"},null,8,["modelValue"])]),e[43]||(e[43]=s("h3",{class:"text-lg font-semibold"},"Media",-1)),s("div",je,[s("input",{type:"file",multiple:"",accept:"image/*",onChange:T,class:"hidden",id:"file-upload"},null,32),s("label",qe,[a(o(se),{class:"w-12 h-12 text-muted-foreground mb-4"}),e[37]||(e[37]=s("p",{class:"text-sm text-foreground mb-1"},[s("span",{class:"text-primary font-medium"},"Click to upload"),d(" or drag and drop ")],-1)),e[38]||(e[38]=s("p",{class:"text-xs text-muted-foreground"}," SVG, PNG, JPG or GIF (MAX. 800x400px) ",-1))]),w.value.length>0?(c(),v("p",ze,p(w.value.length)+" file(s) selected ",1)):b("",!0)]),s("div",Le,[a(o(I),{type:"button",variant:"outline",onClick:M},{default:r(()=>[...e[39]||(e[39]=[d(" Cancel ",-1)])]),_:1}),a(o(I),{type:"submit",class:"bg-primary hover:bg-primary/90"},{default:r(()=>[d(p(g.value?"Update Product":"Save Product"),1)]),_:1})])])],32)])]))}});export{st as default};
