import{c as O,D as T,i as C,h as S}from"./index-DW9eo4Kt.js";import{a7 as y,ae as b,af as w,ag as U,c as g,ah as _,t as v,g as A,a as $,n as x,d as F,E as R,$ as k}from"./index-Bxg717nH.js";import{r as D}from"./createLucideIcon-DJvDazA0.js";function Y(){let t=document.activeElement;if(t==null)return null;for(;t!=null&&t.shadowRoot!=null&&t.shadowRoot.activeElement!=null;)t=t.shadowRoot.activeElement;return t}const[G]=O("ConfigProvider");function j(t){const e=y(),s=e?.type.emits,i={};return s?.length||console.warn(`No emitted event found. Please check component: ${e?.type.__name}`),s?.forEach(u=>{i[b(w(u))]=(...o)=>t(u,...o)}),i}function L(t){const e=y(),s=Object.keys(e?.type.props??{}).reduce((u,o)=>{const n=(e?.type.props[o]).default;return n!==void 0&&(u[o]=n),u},{}),i=U(t);return g(()=>{const u={},o=e?.vnode.props??{};return Object.keys(o).forEach(n=>{u[w(n)]=o[n]}),Object.keys({...s,...u}).reduce((n,l)=>(i.value[l]!==void 0&&(n[l]=i.value[l]),n),{})})}function J(t,e){const s=L(t),i=e?j(e):{};return g(()=>({...s.value,...i}))}function Q(t,e="reka"){return`${e}-${_?.()}`}function V(t,e){const s=v(t);function i(o){return e[s.value][o]??s.value}return{state:s,dispatch:o=>{s.value=i(o)}}}function W(t,e){const s=v({}),i=v("none"),u=v(t),o=t.value?"mounted":"unmounted";let n;const l=e.value?.ownerDocument.defaultView??T,{state:d,dispatch:c}=V(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),r=a=>{if(C){const m=new CustomEvent(a,{bubbles:!1,cancelable:!1});e.value?.dispatchEvent(m)}};A(t,async(a,m)=>{const N=m!==a;if(await x(),N){const E=i.value,f=h(e.value);a?(c("MOUNT"),r("enter"),f==="none"&&r("after-enter")):f==="none"||f==="undefined"||s.value?.display==="none"?(c("UNMOUNT"),r("leave"),r("after-leave")):m&&E!==f?(c("ANIMATION_OUT"),r("leave")):(c("UNMOUNT"),r("after-leave"))}},{immediate:!0});const p=a=>{const m=h(e.value),N=m.includes(CSS.escape(a.animationName)),E=d.value==="mounted"?"enter":"leave";if(a.target===e.value&&N&&(r(`after-${E}`),c("ANIMATION_END"),!u.value)){const f=e.value.style.animationFillMode;e.value.style.animationFillMode="forwards",n=l?.setTimeout(()=>{e.value?.style.animationFillMode==="forwards"&&(e.value.style.animationFillMode=f)})}a.target===e.value&&m==="none"&&c("ANIMATION_END")},P=a=>{a.target===e.value&&(i.value=h(e.value))},M=A(e,(a,m)=>{a?(s.value=getComputedStyle(a),a.addEventListener("animationstart",P),a.addEventListener("animationcancel",p),a.addEventListener("animationend",p)):(c("ANIMATION_END"),n!==void 0&&l?.clearTimeout(n),m?.removeEventListener("animationstart",P),m?.removeEventListener("animationcancel",p),m?.removeEventListener("animationend",p))},{immediate:!0}),I=A(d,()=>{const a=h(e.value);i.value=d.value==="mounted"?a:"none"});return $(()=>{M(),I()}),{isPresent:g(()=>["mounted","unmountSuspended"].includes(d.value))}}function h(t){return t&&getComputedStyle(t).animationName||"none"}var X=F({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(t,{slots:e,expose:s}){const{present:i,forceMount:u}=R(t),o=v(),{isPresent:n}=W(i,o);s({present:n});let l=e.default({present:n.value});l=D(l||[]);const d=y();if(l&&l?.length>1){const c=d?.parent?.type.name?`<${d.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${c}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(r=>`  - ${r}`).join(`
`)].join(`
`))}return()=>u.value||i.value||n.value?k(e.default({present:n.value})[0],{ref:c=>{const r=S(c);return typeof r?.hasAttribute>"u"||(r?.hasAttribute("data-reka-popper-content-wrapper")?o.value=r.firstElementChild:o.value=r),r}}):null}});export{X as P,J as a,L as b,j as c,V as d,Y as g,G as i,Q as u};
